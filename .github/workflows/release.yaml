name: Release Branch Merged

on:
  pull_request:
    branches:
      - main
    types: [closed]

jobs:
  log-release-merge:
    if: github.event.pull_request.merged == true && startsWith(github.head_ref, 'release/')
    runs-on: ubuntu-latest

    steps:
      - name: Log merged release branch
        run: |
          echo "=========================================="
          echo "Release branch merged to main"
          echo "=========================================="
          echo "Branch: ${{ github.head_ref }}"
          echo "PR: #${{ github.event.pull_request.number }}"
          echo "Title: ${{ github.event.pull_request.title }}"
          echo "Merged by: ${{ github.event.pull_request.merged_by.login }}"
          echo "Merged at: ${{ github.event.pull_request.merged_at }}"
          echo "=========================================="
          echo ""
          echo "⚠️  릴리즈 브랜치는 자동 삭제되지 않도록 설정되어야 합니다."
          echo "Repository Settings → General → Pull Requests"
          echo "→ 'Automatically delete head branches' 체크 해제"